<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="customElements/head-element.js"></script>
    <custom-head
      page-title="POStore - Premium Ecommerce"
      description="Discover premium products at unbeatable prices. Shop the latest trends with our curated collection of high-quality items."
      keywords="ecommerce, shopping, premium products, fashion, electronics, home goods"
      author="POStore Team"
      favicon-url="assets/favicon.ico"
      stylesheets="css/style.css"
    ></custom-head>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://postore.com/" />
    <meta property="og:title" content="POStore - Premium Ecommerce" />

    <meta
      property="og:image"
      content="https://images.pexels.com/photos/5632402/pexels-photo-5632402.jpeg?auto=compress&cs=tinysrgb&w=800"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://postore.com/" />
    <meta property="twitter:title" content="POStore - Premium Ecommerce" />
    <meta
      property="twitter:description"
      content="Discover premium products at unbeatable prices. Shop the latest trends with our curated collection of high-quality items."
    />
    <meta
      property="twitter:image"
      content="https://images.pexels.com/photos/5632402/pexels-photo-5632402.jpeg?auto=compress&cs=tinysrgb&w=800"
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://postore.com/" />
    <meta property="og:title" content="POStore - Premium Ecommerce" />
    <meta
      property="og:description"
      content="Discover premium products at unbeatable prices. Shop the latest trends with our curated collection of high-quality items."
    />
    <meta
      property="og:image"
      content="https://images.pexels.com/photos/5632402/pexels-photo-5632402.jpeg?auto=compress&cs=tinysrgb&w=800"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://postore.com/" />
    <meta property="twitter:title" content="POStore - Premium Ecommerce" />
    <meta
      property="twitter:description"
      content="Discover premium products at unbeatable prices. Shop the latest trends with our curated collection of high-quality items."
    />
    <meta
      property="twitter:image"
      content="https://images.pexels.com/photos/5632402/pexels-photo-5632402.jpeg?auto=compress&cs=tinysrgb&w=800"
    />

    <!-- Section Loader JS -->
    <script src="js/section-loader.js"></script>
    <script defer>
      // Load sections when the page is ready
      document.addEventListener("DOMContentLoaded", function () {
        loadSection("headerSection", "sections/header.html");
        loadSection("footerSection", "sections/footer.html");
        loadSection("cartComponentsSection", "sections/cart-components.html");
      });
    </script>
  </head>
  <body>
    <!-- Header Section -->
    <div id="headerSection"></div>

    <!-- Hero Section -->
    <section id="home" class="hero-section text-white py-5 mt-5 mt-sm-0">
      <video class="hero-video-bg" autoplay loop playsinline muted controls>
        <source src="./assets/video/postore.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
      <div class="hero-overlay"></div>
      <div class="container">
        <div class="row align-items-center min-vh-50">
          <div class="col-lg-6">
            <h1 class="display-4 fw-bold mb-4">Discover Premium Products</h1>
            <p class="lead mb-4">
              Shop the latest trends with our curated collection of high-quality
              products at unbeatable prices.
            </p>
            <a
              href="#products"
              class="btn btn-light btn-lg mb-4 mb-sm-0"
              style="position: relative; z-index: 10"
            >
              Shop Now <i class="bi bi-arrow-right ms-2"></i>
            </a>
          </div>
          <div class="col-lg-6 text-center">
            <div
              id="heroCarousel"
              data-bs-interval="3000"
              class="carousel slide"
              data-bs-ride="carousel"
            >
              <div class="carousel-indicators">
                <button
                  type="button"
                  data-bs-target="#heroCarousel"
                  data-bs-slide-to="0"
                  class="active"
                ></button>
                <button
                  type="button"
                  data-bs-target="#heroCarousel"
                  data-bs-slide-to="1"
                ></button>
                <button
                  type="button"
                  data-bs-target="#heroCarousel"
                  data-bs-slide-to="2"
                ></button>
              </div>
              <div class="carousel-inner rounded shadow-lg">
                <div class="carousel-item active">
                  <img
                    src="https://images.pexels.com/photos/5632402/pexels-photo-5632402.jpeg?auto=compress&cs=tinysrgb&w=800"
                    class="d-block w-100 carousel-image"
                    alt="Premium Shopping Experience"
                    loading="lazy"
                  />
                  <div class="carousel-caption d-none d-md-block">
                    <h5 class="fw-bold">Premium Shopping Experience</h5>
                    <p>
                      Discover luxury products with exceptional quality and
                      service.
                    </p>
                  </div>
                </div>
                <div class="carousel-item">
                  <img
                    src="https://images.pexels.com/photos/1005638/pexels-photo-1005638.jpeg?auto=compress&cs=tinysrgb&w=800"
                    class="d-block w-100 carousel-image"
                    alt="Latest Technology"
                    loading="lazy"
                  />
                  <div class="carousel-caption d-none d-md-block">
                    <h5 class="fw-bold">Latest Technology</h5>
                    <p>
                      Stay ahead with cutting-edge electronics and smart
                      devices.
                    </p>
                  </div>
                </div>
                <div class="carousel-item">
                  <img
                    src="https://images.pexels.com/photos/1488463/pexels-photo-1488463.jpeg?auto=compress&cs=tinysrgb&w=800"
                    class="d-block w-100 carousel-image"
                    alt="Fashion & Style"
                    loading="lazy"
                  />
                  <div class="carousel-caption d-none d-md-block">
                    <h5 class="fw-bold">Fashion & Style</h5>
                    <p>Express yourself with our curated fashion collection.</p>
                  </div>
                </div>
              </div>
              <button
                class="carousel-control-prev"
                type="button"
                data-bs-target="#heroCarousel"
                data-bs-slide="prev"
              >
                <span class="carousel-control-prev-icon"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button
                class="carousel-control-next"
                type="button"
                data-bs-target="#heroCarousel"
                data-bs-slide="next"
              >
                <span class="carousel-control-next-icon"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Filters Section -->
    <section id="products" class="pb-2 bg-light">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-6">
            <div class="d-flex gap-2 flex-wrap" id="categoryButtons">
              <button
                class="btn btn-outline-primary active"
                data-category="all"
              >
                All Products
              </button>
              <!-- Category buttons will be dynamically loaded here -->
            </div>
          </div>
          <div class="col-md-6 text-end my-3">
            <select class="form-select d-inline-block w-auto" id="sortSelect">
              <option value="default">Sort by</option>
              <option value="price-low">Price: Low to High</option>
              <option value="price-high">Price: High to Low</option>
              <option value="name">Name A-Z</option>
            </select>
          </div>
        </div>
      </div>
    </section>

    <!-- Products Section -->
    <section class="py-5">
      <div class="container">
        <div class="text-center mb-5">
          <h2 class="display-5 fw-bold mb-3">Featured Products</h2>
          <p class="lead text-muted">
            Discover our handpicked selection of premium items
          </p>
        </div>

        <div class="row" id="productsContainer">
          <!-- Products will be dynamically loaded here -->
        </div>
      </div>
    </section>

    <!-- Cart Components Section -->
    <div id="cartComponentsSection"></div>

    <!-- Footer Section -->
    <div id="footerSection"></div>

    <script src="customElements/bottom-scripts.js"></script>
    <custom-bottom></custom-bottom>

    <script src="js/performance.js"></script>

    <!-- Supabase JS -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

    <!-- Global State -->
    <script src="js/globalState.js"></script>

    <!-- Custom JS -->
    <script src="js/supabase-config.js"></script>
    <script src="js/business-data.js"></script>

    <script src="js/store-functions.js"></script>
    <script src="js/main.js"></script>
    <script src="js/shared-store.js"></script>
    <script src="js/social-share.js"></script>
    <!-- structured-data.js removed -->

    <script>
      // Hide navbar on scroll down, show on scroll up
      let lastScroll = 0;

      // Initialize navbar functionality after DOM is fully loaded
      document.addEventListener("DOMContentLoaded", function () {
        // Wait for sections to load
        document.addEventListener("sectionLoaded", function (e) {
          if (e.detail.id === "headerSection") {
            // Add active class to the About nav link
            document.querySelectorAll(".nav-link").forEach((link) => {
              /* if (link.getAttribute("href").trim() === "index.html#products") {
                link.classList.add("active");
              } */
              if (link.getAttribute("href").trim() === "index.html") {
                link.classList.add("active");
              }
            });
            // Give the DOM time to update
            setTimeout(function () {
              setupNavbar();
            }, 200);
          }
        });
      });

      function setupNavbar() {
        const navbar = document.getElementById("mainNavbar");
        const homeBtn = document.getElementById("homePanelBtn");
        const searchBtn = document.getElementById("searchBtn");
        const searchInput = document.getElementById("searchInput");

        // Safety check
        if (!navbar) {
          console.warn("Navbar element not found");
          return;
        }

        if (!homeBtn) {
          console.warn("Home button element not found");
          return;
        }

        // Set up scroll behavior - only for home button
        window.addEventListener("scroll", function () {
          const currentScroll = window.pageYOffset;
          // Always keep navbar visible
          navbar.style.transform = "translateY(0)";

          // Only show/hide home button based on scroll position
          if (currentScroll > 100) {
            homeBtn.style.display = "block";
          } else {
            homeBtn.style.display = "none";
          }
          lastScroll = currentScroll;
        });

        // Set up home button click to scroll to top
        homeBtn.addEventListener("click", function () {
          window.scrollTo({
            top: 0,
            behavior: "smooth",
          });
        });

        // Set up search functionality - handled by header.html now
        // Desktop search
        const searchBtnDesktop = document.getElementById("searchBtnDesktop");
        const searchInputDesktop =
          document.getElementById("searchInputDesktop");

        if (searchBtnDesktop && searchInputDesktop) {
          searchBtnDesktop.addEventListener("click", function () {
            const query = searchInputDesktop.value;
            if (window.store) {
              if (query.trim()) {
                window.store.searchProducts(query);
              } else {
                window.store.renderProducts();
              }
            }
            scrollToProducts();
          });
          searchInputDesktop.addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
              const query = searchInputDesktop.value;
              if (window.store) {
                if (query.trim()) {
                  window.store.searchProducts(query);
                } else {
                  window.store.renderProducts();
                }
              }
              scrollToProducts();
            }
          });
          searchInputDesktop.addEventListener("input", function () {
            const query = searchInputDesktop.value;
            if (window.store) {
              window.store.searchProducts(query);
            }
          });
        }

        // Mobile search
        if (searchBtn && searchInput) {
          searchBtn.addEventListener("click", function () {
            const query = searchInput.value;
            if (window.store && query.trim()) {
              window.store.searchProducts(query);
            }
            scrollToProducts();
          });
          searchInput.addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
              const query = searchInput.value;
              if (window.store && query.trim()) {
                window.store.searchProducts(query);
              }
              scrollToProducts();
            }
          });
        }

        // Set up small search functionality
        const searchBtnSmall = document.getElementById("searchBtnSmall");
        const searchInputSmall = document.getElementById("searchInputSmall");

        if (searchBtnSmall && searchInputSmall) {
          // Small search button click
          searchBtnSmall.addEventListener("click", function () {
            scrollToProducts();
          });

          // Enter key in small search input
          searchInputSmall.addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
              scrollToProducts();
            }
          });
        }

        // Set up nav links for offcanvas
        setTimeout(function () {
          const navLinks = document.querySelectorAll("#navOffcanvas .nav-link");
          if (navLinks && navLinks.length > 0) {
            navLinks.forEach((link) => {
              link.addEventListener("click", function () {
                const navOffcanvasEl = document.getElementById("navOffcanvas");
                if (navOffcanvasEl) {
                  const navOffcanvas =
                    bootstrap.Offcanvas.getInstance(navOffcanvasEl);
                  if (navOffcanvas) {
                    navOffcanvas.hide();
                  }
                }
              });
            });
          }

          // Set up nav links for hamburger menu
          const hamburgerNavLinks = document.querySelectorAll(
            "#navbarNav .nav-link"
          );
          if (hamburgerNavLinks && hamburgerNavLinks.length > 0) {
            hamburgerNavLinks.forEach((link) => {
              link.addEventListener("click", function () {
                const navbarCollapse = document.getElementById("navbarNav");
                if (
                  navbarCollapse &&
                  navbarCollapse.classList.contains("show")
                ) {
                  const bsCollapse =
                    bootstrap.Collapse.getInstance(navbarCollapse);
                  if (bsCollapse) {
                    bsCollapse.hide();
                  }
                }
              });
            });
          }
        }, 300); // Additional delay for nav links

        // Function to scroll to products section
        function scrollToProducts() {
          const productsSection = document.getElementById("products");
          if (productsSection) {
            productsSection.scrollIntoView({ behavior: "smooth" });
          }
        }
      }
    </script>
  </body>
</html>
