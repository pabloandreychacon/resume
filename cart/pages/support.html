<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="../customElements/head-element.js"></script>
    <custom-head
      page-title="Support - POStore"
      description="Get help and support for your POStore purchases. Find troubleshooting guides, return instructions, and contact our support team."
      keywords="support, help, customer service, troubleshooting, returns, POStore"
      author="POStore Team"
      favicon-url="../assets/favicon.ico"
      stylesheets="../css/style.css"
    ></custom-head>
    <!-- Section Loader JS -->
    <script src="../js/section-loader.js"></script>
    <script defer>
      // Load sections when the page is ready
      document.addEventListener("DOMContentLoaded", function () {
        // Load header section
        loadSection("headerSection", "../sections/header.html", "../");
        // Load footer section
        loadSection("footerSection", "../sections/footer.html", "../");
        loadSection(
          "cartComponentsSection",
          "../sections/cart-components.html"
        );
      });
    </script>
  </head>
  <body>
    <!-- Header Section -->
    <div id="headerSection"></div>

    <!-- Page Header -->
    <section class="bg-primary text-white py-5 mt-5">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-8">
            <h1 class="display-4 fw-bold">Customer Support</h1>
            <p class="lead">
              We're here to help with any issues or questions you may have.
            </p>
          </div>
          <div class="col-lg-4 text-lg-end">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb justify-content-lg-end mb-0">
                <li class="breadcrumb-item">
                  <a href="../index.html" class="text-white">Home</a>
                </li>
                <li
                  class="breadcrumb-item active text-white"
                  aria-current="page"
                >
                  Support
                </li>
              </ol>
            </nav>
          </div>
        </div>
      </div>
    </section>

    <!-- Support Options -->
    <section class="py-5">
      <div class="container">
        <div class="row g-4">
          <div class="col-md-6">
            <div class="card h-100 border-0 shadow-sm">
              <div class="card-body text-center p-4">
                <div class="feature-icon bg-primary text-white mb-4">
                  <i class="bi bi-envelope fs-2"></i>
                </div>
                <h3 class="h4 mb-3">Email Support</h3>
                <p class="text-muted mb-4">
                  Send us an email and we'll get back to you within 24 hours.
                </p>
                <a href="contact.html" class="btn btn-outline-primary"
                  >Contact Form</a
                >
                <p id="business-email" class="small text-muted mt-2">
                  support@postore.com
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card h-100 border-0 shadow-sm">
              <div class="card-body text-center p-4">
                <div class="feature-icon bg-primary text-white mb-4">
                  <i class="bi bi-telephone fs-2"></i>
                </div>
                <h3 class="h4 mb-3">Phone Support</h3>
                <p class="text-muted mb-4">
                  Call us directly for urgent matters or complex issues.
                </p>
                <a
                  href="tel:+18001234567"
                  id="business-phone"
                  class="btn btn-outline-primary"
                  >+1 (800) 123-4567</a
                >
                <p class="small text-muted mt-2">Mon-Fri: 9am-6pm EST</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Common Issues -->
    <section class="py-5 bg-light">
      <div class="container">
        <div class="text-center mb-5">
          <h2 class="display-5 fw-bold">Common Issues</h2>
          <p class="lead text-muted">
            Quick solutions to frequently encountered problems
          </p>
        </div>
        <div class="row g-4">
          <div class="col-md-6">
            <div class="card border-0 shadow-sm">
              <div class="card-body p-4">
                <h3 class="h5 mb-3">
                  <i class="bi bi-box me-2 text-primary"></i>Order Issues
                </h3>
                <ul class="list-unstyled">
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >How to track my order</a
                    >
                  </li>
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >My order is delayed</a
                    >
                  </li>
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >I received the wrong item</a
                    >
                  </li>
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >Item arrived damaged</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card border-0 shadow-sm">
              <div class="card-body p-4">
                <h3 class="h5 mb-3">
                  <i class="bi bi-arrow-return-left me-2 text-primary"></i
                  >Returns & Refunds
                </h3>
                <ul class="list-unstyled">
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >How to return an item</a
                    >
                  </li>
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >Return policy information</a
                    >
                  </li>
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >Check refund status</a
                    >
                  </li>
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >Exchange an item</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card border-0 shadow-sm">
              <div class="card-body p-4">
                <h3 class="h5 mb-3">
                  <i class="bi bi-credit-card me-2 text-primary"></i>Payment
                  Issues
                </h3>
                <ul class="list-unstyled">
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >Payment methods accepted</a
                    >
                  </li>
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >My payment was declined</a
                    >
                  </li>
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >I was charged twice</a
                    >
                  </li>
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >Update payment information</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card border-0 shadow-sm">
              <div class="card-body p-4">
                <h3 class="h5 mb-3">
                  <i class="bi bi-person me-2 text-primary"></i>Account Help
                </h3>
                <ul class="list-unstyled">
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >Reset my password</a
                    >
                  </li>
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >Update account information</a
                    >
                  </li>
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >Manage email preferences</a
                    >
                  </li>
                  <li class="mb-2">
                    <a href="#" class="text-decoration-none"
                      >Delete my account</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Support Ticket -->
    <section class="py-5">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <div class="card border-0 shadow">
              <div class="card-body p-4 p-md-5">
                <h2 class="text-center mb-4">Submit a Support Ticket</h2>
                <p class="text-center text-muted mb-4">
                  Can't find what you're looking for? Submit a ticket and our
                  support team will get back to you.
                </p>
                <form id="supportForm">
                  <div class="row g-3">
                    <div class="col-md-6">
                      <label for="name" class="form-label">Your Name</label>
                      <input
                        type="text"
                        class="form-control"
                        id="name"
                        name="from_name"
                        required
                      />
                    </div>
                    <div class="col-md-6">
                      <label for="email" class="form-label"
                        >Email Address</label
                      >
                      <input
                        type="email"
                        class="form-control"
                        id="email"
                        name="from_email"
                        required
                      />
                    </div>
                    <div class="col-md-6">
                      <label for="orderNumber" class="form-label"
                        >Order Number (if applicable)</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="orderNumber"
                        name="order_number"
                      />
                    </div>
                    <div class="col-md-6">
                      <label for="issueType" class="form-label"
                        >Issue Type</label
                      >
                      <select
                        class="form-select"
                        id="issueType"
                        name="issue_type"
                        required
                      >
                        <option value="" selected disabled>
                          Select an issue type
                        </option>
                        <option value="Order Issue">Order Issue</option>
                        <option value="Return/Refund">Return/Refund</option>
                        <option value="Payment Problem">Payment Problem</option>
                        <option value="Account Help">Account Help</option>
                        <option value="Product Question">
                          Product Question
                        </option>
                        <option value="Other">Other</option>
                      </select>
                    </div>
                    <div class="col-12">
                      <label for="subject" class="form-label">Subject</label>
                      <input
                        type="text"
                        class="form-control"
                        id="subject"
                        name="subject"
                        required
                      />
                    </div>
                    <div class="col-12">
                      <label for="message" class="form-label">Message</label>
                      <textarea
                        class="form-control"
                        id="message"
                        name="message"
                        rows="5"
                        required
                      ></textarea>
                    </div>
                    <div class="col-12 text-center">
                      <button
                        type="submit"
                        class="btn btn-primary btn-lg px-5"
                        id="submitBtn"
                      >
                        Submit Ticket
                        <i class="bi bi-send ms-2"></i>
                      </button>
                      <button
                        class="btn btn-primary btn-lg px-5 d-none"
                        type="button"
                        disabled
                        id="loadingBtn"
                      >
                        <span
                          class="spinner-border spinner-border-sm me-2"
                          role="status"
                          aria-hidden="true"
                        ></span>
                        Submitting...
                      </button>
                    </div>
                  </div>
                </form>
                <div id="formSuccess" class="alert alert-success mt-4 d-none">
                  Thank you for submitting your support ticket! We'll get back
                  to you as soon as possible.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Cart Components Section -->
    <div id="cartComponentsSection"></div>

    <!-- Footer Section -->
    <div id="footerSection"></div>

    <script src="../customElements/bottom-scripts.js"></script>
    <custom-bottom></custom-bottom>

    <!-- Performance Optimization -->
    <script src="../js/performance.js"></script>

    <!-- Custom JS -->
    <script src="../js/globalState.js"></script>
<<<<<<< HEAD

=======
    <script src="../js/shared-store.js"></script>
>>>>>>> 69909810df4e092829c5b994532fb1a4a7dc63ca

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Wait for sections to load
        document.addEventListener("sectionLoaded", function (e) {
          if (e.detail.id === "headerSection") {
            // Add active class to the About nav link
            document.querySelectorAll(".nav-link").forEach((link) => {
              if (link.getAttribute("href").includes("support")) {
                link.classList.add("active");
              }
            });
          }
        });

        // Handle form submission with EmailJS
        document
          .getElementById("supportForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();

            // Show loading button, hide submit button
            document.getElementById("submitBtn").classList.add("d-none");
            document.getElementById("loadingBtn").classList.remove("d-none");

            // Get form data
            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const orderNumber = document.getElementById("orderNumber").value;
            const issueType = document.getElementById("issueType").value;
            const subject = document.getElementById("subject").value;
            const message = document.getElementById("message").value;

            // Load EmailJS dynamically
            var script = document.createElement("script");
            script.src =
              "https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js";
            script.onload = function () {
              // Initialize EmailJS
              emailjs.init("L7o6hZUmFJQ_Jbqu0");

              // Send the email
              emailjs
                .send("service_s481rtv", "template_771ecr6", {
                  to_email:
                    window.globalStore.state.Email ||
                    "pabloandreychacon@gmail.com",
                  from_name: name,
                  from_email: email,
                  subject: `Support Ticket: ${issueType} - ${subject}`,
                  message: `Subject: ${subject}\nFrom: ${email}\nOrder Number: ${
                    orderNumber || "N/A"
                  }\nIssue Type: ${issueType}\n\n${message}`,
                })
                .then(
                  function () {
                    // Show success message
                    document
                      .getElementById("formSuccess")
                      .classList.remove("d-none");
                    document.getElementById("supportForm").reset();

                    // Hide loading button, show submit button
                    document
                      .getElementById("loadingBtn")
                      .classList.add("d-none");
                    document
                      .getElementById("submitBtn")
                      .classList.remove("d-none");
                  },
                  function (error) {
                    console.error("Email sending failed:", error);
                    alert(
                      "Failed to submit support ticket. Please try again later."
                    );

                    // Hide loading button, show submit button
                    document
                      .getElementById("loadingBtn")
                      .classList.add("d-none");
                    document
                      .getElementById("submitBtn")
                      .classList.remove("d-none");
                  }
                );
            };
            document.head.appendChild(script);
          });

        // Set business phone number
        const businessPhone =
          window.globalStore.state.Phone || "+1 (800) 123-4567";
        // Update phone link and text
        document.getElementById("business-phone").textContent = businessPhone;
        document.getElementById(
          "business-phone"
        ).href = `tel:${businessPhone.replace(/\D/g, "")}`;

        // Set business email
        const businessEmail = window.globalStore.state.Email || "";
        // Update email text
        document.getElementById("business-email").textContent = businessEmail;
      });
    </script>
  </body>
</html>
